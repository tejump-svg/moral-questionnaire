<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Moral Alignment Questionnaire</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #f7f7f9;
      --card-bg: #ffffff;
      --text: #222222;
      --accent: #2563eb;
      --accent-soft: #dbeafe;
      --muted: #6b7280;
      --border: #e5e7eb;
      --bar-bg: #e5e7eb;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }
    .app { max-width: 800px; width: 100%; }
    .card {
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
      padding: 24px;
      border: 1px solid var(--border);
    }
    .header { margin-bottom: 16px; display: flex; justify-content: space-between; align-items: flex-start; }
    .title { font-size: 1.25rem; font-weight: 600; }
    .progress-bar { width: 100%; height: 6px; border-radius: 999px; background: var(--bar-bg); overflow: hidden; margin-top: 8px; }
    .progress-fill { height: 100%; width: 0%; background: var(--accent); transition: width 0.25s ease; }
    .scenario { font-size: 1.1rem; margin: 24px 0; line-height: 1.5; min-height: 60px; }
    .options { display: flex; flex-direction: column; gap: 10px; }
    .option {
      border-radius: 8px;
      border: 1px solid var(--border);
      padding: 12px 16px;
      cursor: pointer;
      background: #fff;
      transition: all 0.2s;
    }
    .option:hover { border-color: var(--accent); background: var(--accent-soft); }
    .footer-btns { margin-top: 24px; display: flex; justify-content: space-between; align-items: center; }
    button {
      padding: 8px 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      font-size: 0.9rem;
    }
    .btn-skip { background: #f3f4f6; color: #4b5563; }
    .btn-skip:hover { background: #e5e7eb; }
    .results-row { margin-bottom: 12px; }
    .bar-container { height: 10px; background: var(--bar-bg); border-radius: 5px; overflow: hidden; margin-top: 4px; }
    .bar-fill { height: 100%; background: var(--accent); transition: width 0.8s ease-out; }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <div class="header">
        <div>
          <div class="title" id="display-title">Scenario 1</div>
          <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
        </div>
        <button class="btn-skip" id="btn-results-now" onclick="showResults()">Show Results Now</button>
      </div>
      
      <div id="quiz-content">
        <div class="scenario" id="scenario-text">Loading...</div>
        <div class="options" id="options-list">
          <div class="option" onclick="handleAnswer('A')">Option A: Prioritize the rule/duty.</div>
          <div class="option" onclick="handleAnswer('B')">Option B: Prioritize the outcome.</div>
          <div class="option" onclick="handleAnswer('C')">Option C: Prioritize non-imposition/consent.</div>
          <div class="option" onclick="handleAnswer('D')">Option D: It depends/contextual.</div>
        </div>
      </div>

      <div id="results-content" style="display: none;">
        <div class="title">Your Preliminary Moral Profile</div>
        <p id="results-meta" style="color: var(--muted); margin-bottom: 20px;"></p>
        <div id="bars-list"></div>
        <button class="btn-skip" style="margin-top: 20px;" onclick="location.reload()">Restart Quiz</button>
      </div>
    </div>
  </div>

  <script>
    const QUESTION_BANK = [
      { id: 1, scenario: "A rock naturally breaks loose from a cliff and kills a hiker. No one could have predicted or prevented it." },
      { id: 2, scenario: "A child dies from a genetic disease despite everyone acting responsibly." },
      { id: 3, scenario: "An earthquake kills thousands in an uninhabited moral vacuum (no negligence, no warning, no agency)." },
      { id: 4, scenario: "A lightning strike kills one person instead of another purely by chance." },
      { id: 5, scenario: "A wildfire spreads naturally and destroys a town despite no human cause." },
      { id: 6, scenario: "A disease causes lifelong suffering even though no one caused or ignored it." },
      { id: 7, scenario: "A meteor strikes a populated area without warning." },
      { id: 8, scenario: "A newborn dies during childbirth despite best medical care." },
      { id: 9, scenario: "A predator kills prey in the wild causing suffering." },
      { id: 10, scenario: "Imagine two worlds:\nWorld A: No conscious being ever harms or imposes on another, but disease, accidents, and death still occur.\nWorld B: Same as A, but nature itself cannot cause harm or suffering.\n\nWhich world is morally better?" },
      { id: 11, scenario: "A flood will destroy a city unless redirected toward a smaller village." },
      { id: 12, scenario: "A train will kill five people unless diverted to a track where it kills one." },
      { id: 13, scenario: "A bridge collapse will kill many unless a single person is pushed to block the fall." },
      { id: 14, scenario: "A chemical spill will kill thousands unless one town is deliberately evacuated into danger." },
      { id: 15, scenario: "A hospital can save ten patients by forcibly using one unwilling person’s body." },
      { id: 16, scenario: "A runaway machine will kill five unless you manually activate a mechanism that kills one." },
      { id: 17, scenario: "A military strike will stop a war but kill civilians who are not involved." },
      { id: 18, scenario: "A doctor can stop a disease outbreak by experimenting on an unwilling subject." },
      { id: 19, scenario: "A dam failure can be prevented only by flooding farmland owned by one family." },
      { id: 20, scenario: "A city can be saved only by intentionally diverting danger toward a bystander." },
      { id: 21, scenario: "A worker on dangerous machinery is injured while following normal procedures." },
      { id: 22, scenario: "A pedestrian is killed when pushed into a system they were not part of." },
      { id: 23, scenario: "A protester knowingly enters a violent riot and is harmed." },
      { id: 24, scenario: "A passerby is pulled into danger to stop a larger harm." },
      { id: 25, scenario: "A volunteer firefighter dies while responding to an emergency." },
      { id: 26, scenario: "A tourist unknowingly walks into a restricted danger zone." },
      { id: 27, scenario: "A spectator is killed when used to stop a threat to participants." },
      { id: 28, scenario: "A soldier consents to battle and is killed by enemy fire." },
      { id: 29, scenario: "A civilian is killed to prevent harm to combatants." },
      { id: 30, scenario: "A person is harmed after being forced into a situation they did not choose." },
      { id: 31, scenario: "A person accepts a harmful job because no other work is available." },
      { id: 32, scenario: "A contract is signed under threat of eviction." },
      { id: 33, scenario: "A risky medical procedure is accepted without full understanding." },
      { id: 34, scenario: "A person agrees to harm in exchange for survival." },
      { id: 35, scenario: "A prisoner “consents” to experimentation to reduce their sentence." },
      { id: 36, scenario: "A community agrees to harmful terms to avoid starvation." },
      { id: 37, scenario: "A patient consents while under extreme emotional distress." },
      { id: 38, scenario: "A choice is offered where all alternatives involve serious harm." },
      { id: 39, scenario: "A person agrees to danger while unaware of key risks." },
      { id: 40, scenario: "A person refuses consent but is overridden for a perceived greater good." },
      { id: 41, scenario: "A government official harms a powerless individual for efficiency." },
      { id: 42, scenario: "Two equally powerful individuals harm each other in the same way." },
      { id: 43, scenario: "A leader orders harm to prevent a larger catastrophe." },
      { id: 44, scenario: "A parent harms a child believing it is necessary." },
      { id: 45, scenario: "A religious authority commands an action that causes suffering." },
      { id: 46, scenario: "A law permits harm that would be illegal for private individuals." },
      { id: 47, scenario: "A ruler claims moral exemption due to responsibility." },
      { id: 48, scenario: "A powerful institution causes harm while following policy." },
      { id: 49, scenario: "A powerless individual causes the same harm independently." },
      { id: 50, scenario: "An authority figure commits harm believing it is morally required." },
      { id: 51, scenario: "An action saves lives but foreseeably kills one person." },
      { id: 52, scenario: "A harmful side effect is known but not intended." },
      { id: 53, scenario: "A person intends good but causes serious harm." },
      { id: 54, scenario: "A person intends harm but causes less damage than expected." },
      { id: 55, scenario: "A policy predictably causes suffering without direct intent." },
      { id: 56, scenario: "A weapon is used defensively knowing it will kill innocents." },
      { id: 57, scenario: "A medical treatment cures many but foreseeably causes death." },
      { id: 58, scenario: "A risk is taken knowing someone will likely be harmed." },
      { id: 59, scenario: "A harm is caused accidentally during a rescue." },
      { id: 60, scenario: "A benefit is achieved through a morally troubling method." },
      { id: 61, scenario: "A lie prevents serious harm but erodes trust." },
      { id: 62, scenario: "Repeated small harms normalize cruelty." },
      { id: 63, scenario: "A policy improves outcomes but requires routine deception." },
      { id: 64, scenario: "A person saves lives but becomes callous in the process." },
      { id: 65, scenario: "A society tolerates minor harms for stability." },
      { id: 66, scenario: "An action is good once but corrupting if repeated." },
      { id: 67, scenario: "A leader sacrifices integrity for results." },
      { id: 68, scenario: "A person refuses to act to preserve moral purity." },
      { id: 69, scenario: "You can save a family member or two strangers." },
      { id: 70, scenario: "You caused harm and can either repair it or help more people elsewhere." },
      { id: 71, scenario: "You benefit from an unjust system without direct action." },
      { id: 72, scenario: "You inherit advantages created by past harm." },
      { id: 73, scenario: "You can undo one harm or prevent several future harms." },
      { id: 74, scenario: "A victim demands repair that limits broader benefit." },
      { id: 75, scenario: "Responsibility is shared across many people." },
      { id: 76, scenario: "A harmful practice is culturally accepted." },
      { id: 77, scenario: "Two societies disagree fundamentally about a moral issue." },
      { id: 78, scenario: "Someone claims morality is only emotional preference." },
      { id: 79, scenario: "Someone claims no moral facts exist at all." },
      { id: 80, scenario: "Moral language continues even when no one agrees on outcomes." }
    ];

    let currentIdx = 0;
    let scores = { deontology: 0, utilitarianism: 0, imposition_ethics: 0, relativism: 0 };
    let answeredCount = 0;

    function updateDisplay() {
      if (currentIdx >= QUESTION_BANK.length) {
        showResults();
        return;
      }
      const q = QUESTION_BANK[currentIdx];
      document.getElementById('display-title').innerText = `Scenario ${q.id}`;
      document.getElementById('scenario-text').innerText = q.scenario;
      document.getElementById('progress-fill').style.width = `${(currentIdx / QUESTION_BANK.length) * 100}%`;
    }

    function handleAnswer(type) {
      // Logic for adding scores based on choice (mapping onto frameworks)
      if (type === 'A') scores.deontology++;
      if (type === 'B') scores.utilitarianism++;
      if (type === 'C') scores.imposition_ethics++;
      if (type === 'D') scores.relativism++;
      
      answeredCount++;
      currentIdx++;
      updateDisplay();
    }

    function showResults() {
      document.getElementById('quiz-content').style.display = 'none';
      document.getElementById('btn-results-now').style.display = 'none';
      document.getElementById('results-content').style.display = 'block';
      document.getElementById('display-title').innerText = "Results";
      
      const meta = document.getElementById('results-meta');
      if (answeredCount === 0) {
        meta.innerText = "No questions were answered.";
        return;
      }
      meta.innerText = `Based on ${answeredCount} out of 80 scenarios.`;

      const list = document.getElementById('bars-list');
      list.innerHTML = '';

      Object.entries(scores).forEach(([key, val]) => {
        const percent = Math.round((val / answeredCount) * 100);
        const row = document.createElement('div');
        row.className = 'results-row';
        row.innerHTML = `
          <div style="display:flex; justify-content:space-between; font-size:0.85rem; font-weight:600;">
            <span>${key.replace('_', ' ').toUpperCase()}</span>
            <span>${percent}%</span>
          </div>
          <div class="bar-container"><div class="bar-fill" style="width: ${percent}%"></div></div>
        `;
        list.appendChild(row);
      });
    }

    updateDisplay();
  </script>
</body>
</html>
